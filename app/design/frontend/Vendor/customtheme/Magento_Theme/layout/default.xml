<?xml version="1.0"?>
<page xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
      xsi:noNamespaceSchemaLocation="urn:magento:framework:View/Layout/etc/page_configuration.xsd">
    <body>
        <referenceContainer name="header.panel.wrapper">
            <referenceContainer name="header.panel" remove="true"/>
            <referenceContainer name="header-wrapper" remove="true"/>
            <block class="Vendor\Theme\Block\Topbar" 
                    name="my_new_block" 
                    template="Magento_Theme::html/header.phtml">
                <block class="Magento\Directory\Block\Currency" 
                    name="currency" 
                    template="Magento_Directory::currency.phtml"/>
                <block class="Magento\Store\Block\Switcher" name="store_switcher" as="store_switcher" template="Magento_Store::switch/stores.phtml"/>
            </block>
            <block class="Magento\Framework\View\Element\Template" name="main_header_block" template="Magento_Theme::html/bottom-header.phtml">
                <block class="Magento\Theme\Block\Html\Header\Logo" name="logo">
                    <arguments>
                        <argument name="logoPathResolver" xsi:type="object">Magento\Theme\ViewModel\Block\Html\Header\LogoPathResolver</argument>
                        <argument name="logo_size_resolver" xsi:type="object">Magento\Theme\ViewModel\Block\Html\Header\LogoSizeResolver</argument>
                    </arguments>
                </block>
                <block class="Vendor\Theme\Block\CategoryDropdown" name="category.dropdown" template="Magento_Theme::category-dropdown.phtml"/>
                <block class="Vendor\Theme\Block\MegaCategories" name="mega.category.menu" template="Magento_Theme::mega-categories.phtml"/>
                <block class="Magento\Framework\View\Element\Template" name="top.search" as="topSearch" template="Magento_Search::form.mini.phtml">
                    <arguments>
                        <argument name="configProvider" xsi:type="object">Magento\Search\ViewModel\ConfigProvider</argument>
                        <argument name="additionalSearchFormData" xsi:type="object">Magento\Search\ViewModel\AdditionalSearchFormData</argument>
                    </arguments>
                </block>
                <block class="Magento\Checkout\Block\Cart\Sidebar" name="minicart" as="minicart" after="logo" template="Magento_Checkout::cart/minicart.phtml">
                    <arguments>
                        <argument name="jsLayout" xsi:type="array">
                            <item name="types" xsi:type="array"/>
                            <item name="components" xsi:type="array">
                                <item name="minicart_content" xsi:type="array">
                                    <item name="component" xsi:type="string">Magento_Checkout/js/view/minicart</item>
                                    <item name="config" xsi:type="array">
                                        <item name="template" xsi:type="string">Magento_Checkout/minicart/content</item>
                                    </item>
                                    <item name="children" xsi:type="array">
                                        <item name="subtotal.container" xsi:type="array">
                                            <item name="component" xsi:type="string">uiComponent</item>
                                            <item name="config" xsi:type="array">
                                                <item name="displayArea" xsi:type="string">subtotalContainer</item>
                                            </item>
                                            <item name="children" xsi:type="array">
                                                <item name="subtotal" xsi:type="array">
                                                    <item name="component" xsi:type="string">uiComponent</item>
                                                    <item name="config" xsi:type="array">
                                                        <item name="template" xsi:type="string">Magento_Checkout/minicart/subtotal</item>
                                                    </item>
                                                </item>
                                            </item>
                                        </item>
                                        <item name="extra_info" xsi:type="array">
                                            <item name="component" xsi:type="string">uiComponent</item>
                                            <item name="config" xsi:type="array">
                                                <item name="displayArea" xsi:type="string">extraInfo</item>
                                            </item>
                                        </item>
                                        <item name="promotion" xsi:type="array">
                                            <item name="component" xsi:type="string">uiComponent</item>
                                            <item name="config" xsi:type="array">
                                                <item name="displayArea" xsi:type="string">promotion</item>
                                            </item>
                                        </item>
                                    </item>
                                </item>
                            </item>
                        </argument>
                    </arguments>
                    <container name="minicart.addons" label="Mini-cart promotion block"/>
                </block>
            </block>
        </referenceContainer>
        
        <referenceBlock name="catalog.topnav" remove="true"/>
        <referenceContainer name="footer-container">
            <referenceContainer name="footer" remove="true"/>
            <block class="Magento\Theme\Block\Html\Footer" name="footer-block" template="html/footer.phtml">
                <!-- <block class="Magento\Theme\Block\Html\Header\Logo" name="logo">
                    <arguments>
                        <argument name="logoPathResolver" xsi:type="object">Magento\Theme\ViewModel\Block\Html\Header\LogoPathResolver</argument>
                        <argument name="logo_size_resolver" xsi:type="object">Magento\Theme\ViewModel\Block\Html\Header\LogoSizeResolver</argument>
                    </arguments>
                </block> -->
                <block class="Magento\Newsletter\Block\Subscribe" name="form.subscribe" as="subscribe" before="-" template="Magento_Newsletter::subscribe.phtml" ifconfig="newsletter/general/active"/>
            </block>
        </referenceContainer>
    </body>
</page>
